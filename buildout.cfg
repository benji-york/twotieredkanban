[buildout]
parts = buildout_source_release server dojo paste py 

develop = . generationalset
show-picked-versions = true
update-versions-file = versions.cfg
extends = versions.cfg
relative-paths = true
find-links = http://yum.zope.com/buildout

port = 8080
url = http://localhost:8080

[test]
recipe = zc.recipe.testrunner
eggs = zc.twotieredkanban [test]

[py]
recipe = zc.recipe.egg
eggs = ${test:eggs}
interpreter = py

[server]
recipe = zc.zdaemonrecipe
b = ${buildout:bin-directory}
p = ${buildout:parts-directory}
program = ${:b}/paster serve ${paste.ini:location}

[buildout_source_release]
recipe = zc.recipe.egg
eggs = zc.sourcerelease

[dojo]
recipe = hexagonit.recipe.download
strip-top-level-dir = true
url = http://download.dojotoolkit.org/release-1.9.0/dojo-release-1.9.0.tar.gz
md5sum = 7dcd00f64a8a324dc48a48a2a9db0858

[paste]
recipe = zc.recipe.egg
eggs =
  zc.twotieredkanban
  PasteScript
  zc.zodbwsgi

[paste.ini]
recipe = zc.recipe.deployment:configuration
dojo = ${buildout:parts-directory}/dojo
text =
  [app:main]
  use = egg:bobo
  bobo_configure = zc.twotieredkanban
                   boboserver:static('/dojo', '${:dojo}')
  
  filter-with = reload
  url = ${buildout:url}
  
  [filter:reload]
  use = egg:bobo#reload
  modules = zc.twotieredkanban
            
  filter-with = browserid

  [filter:persona]
  use = egg:zc.persona

  [filter:zodb]
  use = egg:zc.zodbwsgi
  filter-with = debug
  configuration =
    <zodb>
       <mappingstorage>
       </mappingstorage>
    </zodb>
  
  initializer = zc.twotieredkanban.auth:db_init
  
  [filter:debug]
  use = egg:bobo#debug
  
  [server:main]
  use = egg:zc.twotieredkanban
  port = ${buildout:port}
